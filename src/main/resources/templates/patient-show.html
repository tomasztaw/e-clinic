<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
        crossorigin="anonymous">
  <title>Pacjent</title>
</head>
<body>
<div class="container">
  <h2>Pacjent</h2>
  <table class="table table-striped table-hover">
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Surname</th>
      <th>Pesel</th>
      <th>Phone</th>
      <th>Email</th>
    </tr>
    <tr>
      <td th:text="${patient.patientId}"></td>
      <td th:text="${patient.name}"></td>
      <td th:text="${patient.surname}"></td>
      <td th:text="${patient.pesel}"></td>
      <td th:text="${patient.phone}"></td>
      <td th:text="${patient.email}"></td>
    </tr>
  </table>

  <h2>Wizyty</h2>
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>Id wizyty</th>
      <th>Id lekarza</th>
      <th>Data wizyty</th>
      <th>Notatka</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="visit : ${visits}">
      <td th:text="${visit.visitId}"></td>
      <td th:text="${visit.doctorId}"></td>
      <td th:text="${visit.startTime}"></td>
      <td th:text="${visit.note}"></td>
      <td th:text="${visit.status}"></td>
      <td>
<!--        <form action="#" th:action="@{/patients/show/{patientId}(patientId=${patient.patientId})}"-->
        <form action="#" th:action="@{/}"
              method="GET">
          <button type="submit" class="btn btn-info">Przycisk dla opinii (dodaj/aktualizuj)</button>
        </form>
      </td>
      <td>
<!--        th:action="@{/patients/usun/{patientId}(patientId=${patient.patientId})}"-->
        <form action="#" th:action="@{/}"
              th:method="DELETE">
          <button type="submit" class="btn btn-danger">Usuń opinię</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <h2>Opinie</h2>
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>Id opinii</th>
      <th>Id lekarza</th>
      <th>Treść</th>
      <th>Data</th>
      <th>Id wizyty</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="opinion : ${opinions}">
      <td th:text="${opinion.opinionId}"></td>
      <td th:text="${opinion.doctorId}"></td>
      <td th:text="${opinion.comment}"></td>
      <td th:text="${opinion.createdAt}"></td>
<!--      <td th:text="${opinion.visitId}"></td>-->
<!--      <td th:text="${opinion.visit}"></td>-->
      <td>
        <!--        <form action="#" th:action="@{/patients/show/{patientId}(patientId=${patient.patientId})}"-->
        <form action="#" th:action="@{/}"
              method="GET">
          <button type="submit" class="btn btn-info">Aktualizuj</button>
        </form>
      </td>
      <td>
        <!--        th:action="@{/patients/usun/{patientId}(patientId=${patient.patientId})}"-->
        <form action="#" th:action="@{/}"
              th:method="DELETE">
          <button type="submit" class="btn btn-danger">Usuń opinię</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>

  <h2>Recepty</h2>
  <table class="table table-striped table-hover">
    <thead>
    <tr>
      <th>Id recepty</th>
      <th>Id lekarza</th>
      <th>Nazwa leku</th>
      <th>Dawkowanie</th>
      <th>Instrukcja</th>
      <th>Data</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="prescription : ${prescriptions}">
      <td th:text="${prescription.prescriptionId}"></td>
      <td th:text="${prescription.doctorId}"></td>
      <td th:text="${prescription.medicationName}"></td>
      <td th:text="${prescription.dosage}"></td>
      <td th:text="${prescription.instructions}"></td>
      <td th:text="${prescription.createdAt}"></td>
      <td>
        <!--        <form action="#" th:action="@{/patients/show/{patientId}(patientId=${patient.patientId})}"-->
        <form action="#" th:action="@{/doctors/show/{doctorId}(doctorId=${prescription.doctorId})}"
              method="GET">
          <button type="submit" class="btn btn-info">Pokaż lekarza</button>
        </form>
      </td>
    </tr>
    </tbody>
  </table>




  <a class="btn btn-light" th:href="@{/patients/panel}">Show all patients</a>
</div>
</body>
</html>